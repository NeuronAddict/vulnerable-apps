version: '2'

services:
  mysql:
    image: docker.io/bitnami/mariadb:11.2.2
    environment:
    - MYSQL_RANDOM_ROOT_PASSWORD=yes
    - MYSQL_USER=${MYSQL_USER}
    - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    - MYSQL_DATABASE=db
    volumes:
    - ./docker-entrypoint-initdb.d:/docker-entrypoint-initdb.d
    - ./mysql/conf.d:/etc/mysql/conf.d
    - mysql-log:/var/log/mysql
    - ./src:/var/www/html
  web:
    build: 
      context: php
    volumes:
    - ./src:/var/www/html
    ports:
    - "127.0.0.1:8181:80"

volumes:
  mysql-log:
    driver: local
